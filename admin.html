<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Video & Ses Yönetim</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; }
        .box { background: white; padding: 20px; border-radius: 12px; max-width: 500px; margin: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #1a73e8; color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
        .list-item { background: white; margin-top: 10px; padding: 10px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }
        .btn-del { background: #d93025; padding: 5px 10px; font-size: 12px; }
    </style>
</head>
<body>

<div class="box">
    <h2>Yeni Kayıt</h2>
    <input type="text" id="title" placeholder="Başlık">
    <input type="text" id="v_url" placeholder="Video URL (YouTube)">
    <input type="text" id="a_url" placeholder="Ses Dosyası URL (MP3)">
    <button onclick="kaydet()">SİSTEME KAYDET</button>
</div>

<div id="v-list" style="max-width: 500px; margin: 20px auto;"></div>

<script>
    const config = {
        apiKey: "AIzaSyDVS-jg8FkE9xuUfzlnYboKrqsHHTL3Bvo",
        databaseURL: "https://naberdeneme-ffa04-default-rtdb.firebaseio.com",
        projectId: "naberdeneme-ffa04"
    };
    firebase.initializeApp(config);
    const db = firebase.database();

    function kaydet() {
        const title = document.getElementById('title').value;
        let v_url = document.getElementById('v_url').value;
        const a_url = document.getElementById('a_url').value;

        if(!title || !v_url || !a_url) { alert("Lütfen tüm alanları doldurun!"); return; }

        if(v_url.includes("watch?v=")) v_url = v_url.replace("watch?v=", "embed/");
        if(v_url.includes("youtu.be/")) v_url = v_url.replace("youtu.be/", "youtube.com/embed/");

        db.ref('videolar').push({ title, v_url, a_url })
        .then(() => location.reload());
    }

    db.ref('videolar').on('value', snap => {
        const list = document.getElementById('v-list');
        list.innerHTML = "<h3>Kayıtlı Dosyalar</h3>";
        snap.forEach(child => {
            const v = child.val();
            list.innerHTML += `
                <div class="list-item">
                    <span>${v.title}</span>
                    <button class="btn-del" onclick="sil('${child.key}')">Sil</button>
                </div>
            `;
        });
    });

    function sil(key) { if(confirm("Silinsin mi?")) db.ref('videolar').child(key).remove(); }
</script>
</body>
    </html>
