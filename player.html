<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Oynatıcı</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        
        /* Video Tam Ekran */
        #v-container { width: 100vw; height: 100vh; position: absolute; top: 0; left: 0; }
        iframe { width: 100%; height: 100%; border: none; }

        /* Başlatma Butonu (Merkezi) */
        .sync-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            display: flex; align-items: center; justify-content: center; z-index: 99;
        }
        .start-btn {
            padding: 25px 50px; background: #e50914; color: white; 
            border: none; border-radius: 50px; font-size: 24px; font-weight: bold; cursor: pointer;
        }
        
        /* Ses dosyası gizli */
        audio { display: none; }
    </style>
</head>
<body>

    <div class="sync-overlay" id="overlay">
        <button class="start-btn" onclick="syncStart()">VİDEO VE SESİ BAŞLAT</button>
    </div>

    <div id="v-container"></div>
    <audio id="bgAudio"></audio>

    <script>
        // URL'den video ve ses linklerini al
        const params = new URLSearchParams(window.location.search);
        const vUrl = params.get('v');
        const aUrl = params.get('a');

        const audio = document.getElementById('bgAudio');
        const vContainer = document.getElementById('v-container');

        // Sayfa yüklendiğinde hazırlıkları yap
        window.onload = () => {
            if(vUrl && aUrl) {
                vContainer.innerHTML = `<iframe id="ytPlayer" src="${vUrl}?enablejsapi=1&autoplay=0&controls=0" allow="autoplay"></iframe>`;
                audio.src = aUrl;
                audio.load();
            }
        };

        function syncStart() {
            const iframe = document.getElementById('ytPlayer');
            
            // Aynı anda başlatma komutları
            audio.play();
            iframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');

            // Arayüzü temizle
            document.getElementById('overlay').style.display = 'none';
            
            // Periyodik Senkronizasyon Kontrolü (Her 5 saniyede bir)
            setInterval(() => {
                // Eğer ses ve video saniyeleri çok saparsa (opsiyonel geliştirme alanı)
                // audio.currentTime ile video saniyesini eşitleyebiliriz
            }, 5000);
        }
    </script>
</body>
</html>
